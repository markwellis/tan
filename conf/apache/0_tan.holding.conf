<VirtualHost *:443>
    ServerName thisaintnews.com

    CustomLog ${APACHE_LOG_DIR}/access.tan_holding.log combined

    DocumentRoot "/var/www/TAN.holding"

    SSLEngine on
    SSLCertificateFile      /var/www/TAN/conf/ssl/thisaintnews.crt
    SSLCertificateChainFile /var/www/TAN/conf/ssl/sub.class1.server.ca.pem
    SSLCertificateKeyFile   /var/www/TAN/conf/ssl/thisaintnews.key
    SSLCACertificateFile    /var/www/TAN/conf/ssl/ca.pem
    SSLProtocol             all -SSLv2
    SSLCipherSuite          ECDHE-RSA-AES128-GCM-SHA256:ECDHE-ECDSA-AES128-GCM-SHA256:ECDHE-RSA-AES256-GCM-SHA384:ECDHE-ECDSA-AES256-GCM-SHA384:kEDH+AESGCM:ECDHE-RSA-AES128-SHA256:ECDHE-ECDSA-AES128-SHA256:ECDHE-RSA-AES128-SHA:ECDHE-ECDSA-AES128-SHA:ECDHE-RSA-AES256-SHA384:ECDHE-ECDSA-AES256-SHA384:ECDHE-RSA-AES256-SHA:ECDHE-ECDSA-AES256-SHA:DHE-RSA-AES128-SHA256:DHE-RSA-AES128-SHA:DHE-RSA-AES256-SHA256:DHE-DSS-AES256-SHA:AES128-GCM-SHA256:AES256-GCM-SHA384:ECDHE-RSA-RC4-SHA:ECDHE-ECDSA-RC4-SHA:RC4-SHA:HIGH:!aNULL:!eNULL:!EXPORT:!DES:!3DES:!MD5:!PSK
    SSLHonorCipherOrder     on
    SSLCompression          off
    SSLUseStapling          on
    SSLStaplingResponderTimeout 5
    SSLStaplingReturnResponderErrors off

    Header add Strict-Transport-Security "max-age=15768000"

    RewriteEngine on
    RewriteCond %{HTTP_HOST} !^(?:dev.)?thisaintnews.com
    RewriteRule "(.*)" "https://thisaintnews.com$1" [R=302,NE,L]

    ErrorDocument 404 /index.html
</VirtualHost>

<VirtualHost *:80>
    ServerName thisaintnews.com
    ServerAlias dev.thisaintnews.com

    CustomLog ${APACHE_LOG_DIR}/access.tan_holding_redirect.log combined

    RewriteEngine On
    RewriteRule "(.*)" "https://%{HTTP_HOST}$1" [R=302,NE,L]
</VirtualHost>
